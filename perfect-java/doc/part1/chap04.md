# 変数とオブジェクト

## 参照型変数と基本型変数の代入の概念モデルを分けて考える理由

参照型の変数の代入時は、基本型の変数と同じように“参照値（ポインタ）”のコピーが行われる。ただし、Javaには参照値自体を加算する演算がないので、概念として分けて考えた方が良い。

## 変数の型とオブジェクトの型

* 変数の型は、その変数が参照するオブジェクトに対してどんな操作ができるかを確定する。（振る舞いの確定）
* オブジェクトの型は、呼ばれた先の動作を確定する。（実装の確定）

## 変数のスコープ

* ローカル変数とインスタンスフィールド変数が同じ名前で使用されている場合、ローカル変数の方が優先される。
* 明示的にthisを付けてインスタンスフィールド変数を参照できるが、thisの濫用は継承関係にあるクラス間のリファクタリングをしにくくする面もあるため、注意して使う。（ローカル変数とインスタンスフィールド変数のスコープが被っている時のみ使う、とか
    * 上位クラスにインスタンスフィールド変数を移したりすると、サブクラスからthisを付けて参照しているのにスーパークラスを参照しにいく、など
    * superは、上位クラスを参照するキーワードだが、実際には名前解決の対象を自身のフィールドまたはメソッドを対象外とするだけ。

## オブジェクトの寿命

* 参照が外れた時、ガベージコレクションの対象になる。いつ破棄されるかは、ガベージコレクションの内部動作に依存するので、開発者は参照のなくなったオブジェクトのその後を気にする必要はない。

## final変数と不変オブジェクト

* final変数の厳密な意味は「**再代入不可**」の変数。
    * final変数が基本型の場合は変更不可の意味と等価だが、final変数が参照型の場合は、変数が参照するオブジェクト自体の変更は可能。
* 参照先オブジェクトそのものの変更を禁止するには、不変オブジェクトを使う。
    * 不変オブジェクトの一つの例がStringクラス。

## 堅牢なプログラムのための工夫

* 変数は宣言と同時に初期化する（無理のない範囲で）
* 変数を使い回さない（再代入は避ける）
* 変数のスコープを小さくする
* オブジェクトの寿命を意識する
* 不変オブジェクトを活用する
