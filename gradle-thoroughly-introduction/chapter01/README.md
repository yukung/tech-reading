# Gradle の世界

## Gradle とは

* 他のビルドツールに比べてシンプルに記述できる
* Ant や Maven といった既存のビルドツールのエコシステムを活用している
    * 既存の Ant タスクや Maven リポジトリをそのまま使える
    * 既存の資産を捨てなくても活用できる
* ビルドツールは、ソフトウェア開発に発生する多くの提携作業を自動化する
    * コンパイル、静的解析、テストカバレッジ
    * ドキュメント生成
    * パッケージング
    * リリース
* 手作業によるミスの防止や、ビルド手順の統一化、環境祭によるビルド失敗を防ぐ

### ビルドツールの変遷と他のビルドツールとの比較

* Make
   * Makefile によりビルドという概念を持ち込んだ
   * プラットフォーム依存なので OS が異なると動作しない
* Ant
   * XML でビルドスクリプトを記述することにより、プラットフォーム非依存
   * シンプルで使いやすい反面、ビルド手順の標準規約が存在しないため、全てを記述すると重厚長大になりメンテナンスが大変
   * ライブラリの依存関係を管理する仕組みがない
       * のちに Ivy がそれをカバーするようになった
* Maven
   * Ant と同様、プラットフォーム非依存
   * ビルドライフサイクルとプロジェクトオブジェクトモデル（POM）という概念を持ち込み、ビルドスクリプトの冗長化を解消した
   * POMにメタデータを記述することで、ライブラリの依存関係を自動的に解決
   * 高機能である反面、暗黙的な規約を理解する必要があり、標準の規約から外れたことをしようとするととたんに難易度が高くなる
* Gradle
   * これまでのビルドツールの良い面を踏襲し、デメリットを排除
   * クロスプラットフォーム対応
   * 規約によるビルドで、冗長化を解消
   * 動的なスクリプトによる記述で、柔軟性を高めている

## なぜ Gradle なのか

* 拡張可能なビルド言語（DSL）の提供
    * ビルドをシンプルに記述でき、冗長化を解消
* ビルドスクリプトの記述言語として Groovy を利用
    * Ant や Maven と違い、条件分岐や繰り返しも容易
    * ビルドスクリプトの中で Java のユーティリティを使うことも簡単
* ビルドの分割や共通部品抽出などの体系化の容易さ
    * Maven のような固定的なビルド手順を規定しておらず、Gradle ではタスクの依存関係によって決定されるため、入れ替えやスキップなどのカスタマイズも容易
    * ビルドの部品化も容易
        * ビルドスクリプト内でのメソッドやクラスの抽出
        * ビルドスクリプトの分割と再利用（`Apply from:` による読み込み）
        * プロジェクト内限定で利用する拡張モジュール（`buildSrc` プロジェクト）
        * 複数プロジェクトで汎用的に再利用するプラグイン
* IDE などと連携するため、Gradle を外部からコントロールするための API を提供
* インクリメンタルビルドや並列ビルドなどでビルドを効率化
* マルチプロジェクトサポートの柔軟性
    * マルチプロジェクトに含めるサブプロジェクトを定義する機能
    * サブプロジェクトに共通のビルドスクリプトを集約する機能
    * サブプロジェクト感の依存関係を定義する機能
    * 依存関係を考慮してインクリメンタルビルドする機能
* Maven/Ivy リポジトリからローカルファイルシステムまで多様な依存性管理手法に対応
* Gradle ラッパーによって Gradle がインストールされていない環境でもビルドが実行可能
    * 環境の統一が簡単
    * CI サーバでの動作も統一的な環境で行えセットアップも簡単
* 互換性への配慮
    * 既存の機能が突然使えなくなるような変更を行わない
    * 機能を除去する場合は、将来的に廃止される可能性を明示して段階的に除去する
    * 新機能は十分なフィードバックを受けて安定してから固定化する
    * 機能のライフライクル
        * Internal
        * Incubating
        * Public
        * Deprecated
   * Gradle の後方互換ポリシー
       * メジャーバージョンアップを通じて後方互換性を維持するように努める
       * Public ステータスの機能は明示的に Deprecated ステータスに移行しない限り、除去されることはない
       * Deprecated ステータスに移行した機能は次のメジャーバージョンアップの時に除去される

